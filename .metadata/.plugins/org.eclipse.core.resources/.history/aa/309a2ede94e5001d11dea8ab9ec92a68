package com.example.demo.controller;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import com.example.demo.model.Books;
import com.example.demo.service.BooksService;

@RestController
public class BooksController {

	@Autowired  
	BooksService booksService;  
	  
	@GetMapping(value="/book")  
	public List<Books> getAllBooks()   
	{ 
		List<Books>bookList=booksService.getAllBooks();
	return bookList;  
	}  
	 
	@GetMapping(value="/book/{bookid}")  
	public Books getBooks(@PathVariable("bookid") int bookid)   
	{  
	return booksService.getBooksById(bookid);  
	}  
  
	@DeleteMapping(value="/book/{bookid}")  
	public void deleteBook(@PathVariable("bookid") int bookid)   
	{  
	booksService.delete(bookid);  
	}  
	 
	@PostMapping(value="/books")  
	public Books saveBooks(@RequestBody Books u)   
	{  
	
	return booksService.saveBooks(u);  
	}  
	   
	@PutMapping(value="/books")  
	public Books update(@RequestBody Books u)   
	{  
 
	return booksService.update(u);    
	} 
	
	    //http://localhost:8080/sortbooks/bookname
		@GetMapping("/sortbooks/{field}")
		public List<Books>sortBooks(@PathVariable String field)
		{
			return booksService.sortBooks(field);
		}
		
		
		//http://localhost:8080/pagingBooks/1/4
		@GetMapping("/pagingBooks/{offset}/{pageSize}")
		public List<Books>pagingBooks(@PathVariable("offset") int num,@PathVariable("pageSize") int size)
		{
			return booksService.pagingBooks(num,size);
		}
		
		
		//http://localhost:8080/pagination/2/3/bookname
		@GetMapping("pagination/{nm}/{sp}/{inr}")
		public List<Books> paginate(@PathVariable("nm") int num,@PathVariable("sp") int size,@PathVariable("inr") String name)
		{
			return booksService.paginate(num,size,name);
		}
		
		//http://localhost:8080/fetchBooksByNamePrefix?prefix=t
		@GetMapping("/fetchBooksByNamePrefix")
		public List<Books> fetchBooksByNamePrefix(@RequestParam String prefix)
		{
			  return booksService.fetchBooksByNamePrefix(prefix);
		}
		
		//http://localhost:8080/fetchBooksByNameSuffix?suffix=n
		@GetMapping("/fetchBooksByNameSuffix")
		public List<Books> fetchBooksByNameSuffix(@RequestParam String suffix)
		{
	     	 return booksService.fetchBooksByNameSuffix(suffix);
	    }
}
